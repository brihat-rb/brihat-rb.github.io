<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather</title>
	  <link rel="stylesheet" href="./weather.css" />
  </head>
  <center><noscript>Please enable JavaScript</noscript></center>
  <body>
    <div id="datetime"></div>
    <div id="div_content">
      <div id="wide">
        <center><img id="weather_icon" /></center>
        <input id="city" type="text" placeholder="Enter city (eg. Bhaktapur)" autofocus />
        <br class="wide_screen">
        <button id="btn" onclick="get_weather();">Go</button>
        <button id="btnforecast" onclick="forecast();">Forecast</button><br />
        <span id="info"></span>
      </div>
      <div id="weather_info">
        Place: <span id="location"></span><br />
        Weather: <span id="weather_main"></span><br />
        Current Temperature: <span id="temp"></span> &deg;C<br />
        Feels Like: <span id="feels_like"></span> &deg;C<br />
        Min Temp: <span id="min_temp"></span> &deg;C<br />
        Max Temp: <span id="max_temp"></span> &deg;C<br />
        <span id="rain_parent">Rain: <span id="rain"></span> mm</span>
        <span id="snow_parent">Snow: <span id="snow"></span> mm</span>
        <br id="optbr" />
        Pressure: <span id="pressure"></span> hpa<br />
        Humidity: <span id="humidity"></span> %<br />
        Sunrise: <span id="sunrise"></span><br />
        Sunset: <span id="sunset"></span><br />
        Wind: <span id="wind"></span>
      </div>
      <div id="iupdate">
        Updated: <span id="last_update"></span> (<a href="https://openweathermap.org/" style="text-decoration: none">OpenWeather</a>)
      </div>
    </div>

    <!-- for weather forecast -->
    <div id="popup" class="forecast">
      <!-- Modal content -->
      <div class="forecast-content">
        <span class="close">&times;</span>
        <div id="wforecast"></div>
      </div>
    </div>

    <script>
      var request = new XMLHttpRequest();
      url = 'https://ipinfo.io/?token=6630ba13ce995d';
      request.open('GET', url, true);
      request.onload = function() {
        response = JSON.parse(this.response);
        document.getElementById("user_ip").innerHTML = response["ip"];
        document.getElementById("user_geolocation").innerHTML = response["loc"];
      }
      request.send();
    </script>

    <script type="text/javascript" src="./weather.js"></script>
    <script type="text/javascript" src="./weatherforecast.js"></script>
    <div id="footer">&spades; <a href="https://brihat-rb.github.io/">Brihat</a> &spades;</div>
    <div id="user_info"><div id="user_ip"></div><div id="user_geolocation"></div></div>
  </body>
  </html>

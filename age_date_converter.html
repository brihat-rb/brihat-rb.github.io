<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <title>Age Calculator | AD-BS Date Converter</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./age_date_converter.css" />
  </head>

  <body>
    <i id="datetime"></i>
    <br />
    <h2 onclick="toggle_content('date_converter')" title="Click to convert date">AD BS Date Converter</h2>
    <div id="date_converter">
      <div id="ad_to_bs">
        <div class="input">AD: <input type="date" id="ad_date" />
          <button id="button_to_bs" onclick="to_bs();">GET BS</button>
        </div>
        <div id="bs_result">BS here</div>
      </div>
      <div id="bs_to_ad">
        <div class="input">BS:
          <select id="select_year"></select>
          <select id="select_month"></select>
          <select id="select_date"></select>
          <button id="button_to_ad" onclick="to_ad();">GET AD</button>
        </div>
        <div id="ad_result">AD here</div>
      </div>
    </div>

    <h2 onclick="toggle_content('age_calculator')" title="Click to calculate age">Age Calculator</h1>
    <div id="age_calculator">
      <div id="age_calculator_ad">
        <div class="age_header">Calculate from AD Date</div>
        <div class="input">Birthdate: <input type="date" id="date1" /></div>
        <div class="input">As of date: <input type="date" id="date2" /></div>
        <button id="button" onclick="date_diff_ad();">Calculate</button>
      </div>

      <div id="age_calculator_bs">
        <div class="age_header">Calculate from BS Date</div>
        <div class="input">Birthdate:
          <select id="select_birthdate_year"></select>
          <select id="select_birthdate_month"></select>
          <select id="select_birthdate_date"></select>
        </div>
        <div class="input">As of date:
          <select id="select_asof_year"></select>
          <select id="select_asof_month"></select>
          <select id="select_asof_date"></select>
        </div>
        <button id="button" onclick="date_diff_bs();">Calculate</button>
      </div>
    </div>
    <div id="age_result"></div>
    <br />

    <div id="user_info">
      <span id="user_ip"></span>&emsp;
      <span id="user_geolocation"></span>
    </div>

    <div id="footer">&spades; <a href="https://brihat-rb.github.io/">Brihat</a> &spades;</div>

    <script>
      var request = new XMLHttpRequest();
      url = 'https://ipinfo.io/?token=6630ba13ce995d';
      request.open('GET', url, true);
      request.onload = function() {
        response = JSON.parse(this.response);
        document.getElementById("user_ip").innerHTML = response["ip"];
        document.getElementById("user_geolocation").innerHTML = response["loc"];
      }
      request.send();
    </script>

    <script>
      function toggle_content(div_id) {
        let div_container = document.getElementById(div_id);
        if (div_container.style.display === "none") {
          div_container.style.display = "flex";
        }
        else if (div_container.style.display === "flex") {
          div_container.style.display = "none";
        }
        else {
          div_container.style.display = "flex";
        }
      }
    </script>

    <script type="text/javascript" src="./nepali_calendar_tools.js"></script>

    <!-- for topmost date display -->
    <script>
      function showtime() {
        let dt = new Date();
        let bs_date = get_bs_date_from_date_object(dt);
        document.getElementById("datetime").innerHTML = bs_date + " - " + dt.toLocaleTimeString();
        setTimeout("showtime()", 500);
      }
      showtime();
    </script>
  </body>
</html>
